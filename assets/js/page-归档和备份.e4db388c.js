(window.webpackJsonp=window.webpackJsonp||[]).push([[171],{920:function(s,a,n){"use strict";n.r(a);var t=n(1),e=Object(t.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"归档和备份"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#归档和备份"}},[s._v("#")]),s._v(" 归档和备份")]),s._v(" "),n("h2",{attrs:{id:"gzip"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#gzip"}},[s._v("#")]),s._v(" gzip")]),s._v(" "),n("p",[s._v("gzip 程序用来压缩文件，原文件的压缩版(添加 "),n("code",[s._v("gz")]),s._v(" 后缀名)会替代原文件。gunzip 程序用来还原压缩版本。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("gzip")]),s._v(" foo.txt\ngunzip foo.txt.gz\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[n("code",[s._v("gzip")]),s._v(" 的参数如下。")]),s._v(" "),n("ul",[n("li",[s._v("-c 把输出写入到标准输出，并且保留原始文件。也有可能用--stdout 和--to-stdout 选项来指定。")]),s._v(" "),n("li",[s._v("-d 解压缩。正如 gunzip 命令一样。也可以用--decompress 或者--uncompress 选项来指定.")]),s._v(" "),n("li",[s._v("-f 强制压缩，即使原始文件的压缩文件已经存在了，也要执行。也可以用--force 选项来指定。")]),s._v(" "),n("li",[s._v("-h 显示用法信息。也可用--help 选项来指定。")]),s._v(" "),n("li",[s._v("-l 列出每个被压缩文件的压缩数据。也可用--list 选项。")]),s._v(" "),n("li",[s._v("-r 若命令的一个或多个参数是目录，则递归地压缩目录中的文件。也可用--recursive 选项来指定。")]),s._v(" "),n("li",[s._v("-t 测试压缩文件的完整性。也可用--test 选项来指定。")]),s._v(" "),n("li",[s._v("-v 显示压缩过程中的信息。也可用--verbose 选项来指定。")]),s._v(" "),n("li",[s._v("-number 设置压缩指数。number 是一个在 1(最快，最小压缩)到 9(最慢，最大压缩)之间的整数。数值 1 和 9 也可以各自用--fast 和--best 选项来表示。默认值是整数 6。")])]),s._v(" "),n("p",[s._v("下面是一些例子。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看解压缩后的内容")]),s._v("\n$ gunzip -c foo.txt "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("less")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[n("code",[s._v("zcat")]),s._v(" 程序等同于带有-c 选项的 gunzip 命令。它可以像 "),n("code",[s._v("cat")]),s._v(" 命令那样，用来查看 "),n("code",[s._v("gzip")]),s._v(" 压缩文件。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("zcat foo.txt.gz "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("less")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h2",{attrs:{id:"bzip2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#bzip2"}},[s._v("#")]),s._v(" bzip2")]),s._v(" "),n("p",[n("code",[s._v("bzip2")]),s._v(" 程序与 "),n("code",[s._v("gzip")]),s._v(" 程序相似，但是使用了不同的压缩算法，舍弃了压缩速度，实现了更高的压缩级别。在大多数情况下，它的工作模式等同于 "),n("code",[s._v("gzip")]),s._v("。由 "),n("code",[s._v("bzip2")]),s._v(" 压缩的文件，用扩展名 "),n("code",[s._v(".bz2")]),s._v(" 表示。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("bzip2")]),s._v(" foo.txt\nbunzip2 foo.txt.bz2\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("gzip 程序的所有选项(除了 "),n("code",[s._v("-r")]),s._v(")，bzip2 程序同样也支持。同样有 bunzip2 和 bzcat 程序来解压缩文件。bzip2 文件也带有 bzip2recover 程序，其会 试图恢复受损的 .bz2 文件。")]),s._v(" "),n("h2",{attrs:{id:"zip"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#zip"}},[s._v("#")]),s._v(" zip")]),s._v(" "),n("p",[n("code",[s._v("zip")]),s._v(" 程序既是压缩工具，也是一个打包工具，读取和写入.zip 文件。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("zip")]),s._v(" options zipfile file"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("它的用法如下。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将指定目录压缩成zip文件")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("zip")]),s._v(" -r playground.zip playground\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[n("code",[s._v("zip")]),s._v(" 与 "),n("code",[s._v("tar")]),s._v(" 命令有一个相反之处。如果压缩文件已存在，其将被更新而不是被替代。这意味着会保留此文件包，但是会添加新文件，同时替换匹配的文件。")]),s._v(" "),n("p",[s._v("解压使用 "),n("code",[s._v("unzip")]),s._v(" 命令。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("unzip")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/playground.zip\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("code",[s._v("unzip")]),s._v(" 命令的参数如下。")]),s._v(" "),n("ul",[n("li",[n("code",[s._v("-l")]),s._v(" 列出文件包中的内容而不解压")]),s._v(" "),n("li",[n("code",[s._v("-v")]),s._v(" 显示冗余信息")]),s._v(" "),n("li",[n("code",[s._v("-p")]),s._v(" 输出发送到标准输出")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("unzip")]),s._v(" -p ls-etc.zip "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("less")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h2",{attrs:{id:"tar"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#tar"}},[s._v("#")]),s._v(" tar")]),s._v(" "),n("p",[n("code",[s._v("tar")]),s._v(" 是 tape archive 的简称，原来是一款制作磁带备份的工具，现在主要用于打包。一个 tar 包可以由一组独立的文件，一个或者多个目录，或者两者混合体组成。")]),s._v(" "),n("p",[n("code",[s._v("tar")]),s._v(" 程序的语法如下。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" mode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("options"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" pathname"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("tar 支持以下模式。")]),s._v(" "),n("ul",[n("li",[s._v("c 表示 create，为文件和／或目录列表创建归档文件。")]),s._v(" "),n("li",[s._v("x 抽取归档文件。")]),s._v(" "),n("li",[s._v("r 追加具体的路径到归档文件的末尾。")]),s._v(" "),n("li",[s._v("t 列出归档文件的内容。")])]),s._v(" "),n("p",[s._v("支持的参数如下。")]),s._v(" "),n("ul",[n("li",[s._v("f 表示 file，用来指定生成的文件。")])]),s._v(" "),n("p",[s._v("模式和参数可以写在一起，而且不需要开头的短横线。注意，必须首先指定模式，然后才是其它的选项。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建子目录的tar包")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" cf playground.tar playground\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看tar包内容")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" tf playground.tar\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看更详细的列表信息")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" tvf playground.tar\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 还原归档文件")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" xf playground.tar\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 还原单个文件")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" xf archive.tar pathname\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 还原文件到指定目录")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" xvf archive.tar -C /home/me/\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 追加文件")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" rf archive.tar file.txt\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 验证归档文件内容是否正确")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" tvfW archive.tar\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 支持通配符")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" xf "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/playground2.tar --wildcards "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'home/me/playground/\\*.txt'")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br")])]),n("p",[s._v("注意，"),n("code",[s._v("tar")]),s._v(" 命令还原的时候，总是还原为相对路径。如果归档的时候，保存的是绝对路径，那么还原的时候，这个绝对路径会整个变成相对路径。")]),s._v(" "),n("p",[n("code",[s._v("find")]),s._v(" 命令可以与 "),n("code",[s._v("tar")]),s._v(" 命令配合使用。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" playground -name "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'file.txt'")]),s._v(" -exec "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" rf playground.tar "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{}'")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'+'")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("上面的命令先用 "),n("code",[s._v("find")]),s._v(" 程序找到所有名为 "),n("code",[s._v("file.txt")]),s._v(" 的文件，然后使用追加模式("),n("code",[s._v("r")]),s._v(")的 "),n("code",[s._v("tar")]),s._v(" 命令，把匹配的文件添加到归档文件 "),n("code",[s._v("playground.tar")]),s._v(" 里面。")]),s._v(" "),n("p",[s._v("这种 "),n("code",[s._v("tar")]),s._v(" 和 "),n("code",[s._v("find")]),s._v(" 的配合使用，可以创建逐渐增加的目录树或者整个系统的备份。通过 "),n("code",[s._v("find")]),s._v(" 命令匹配新于某个时间戳的文件，我们就能够创建一个归档文件，其只包含新于上一个 tar 包的文件。")]),s._v(" "),n("p",[s._v("tar 支持压缩功能。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 打成gzip压缩包")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" czvf assets.tar.gz dist\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 打成bz2压缩包")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" cvfj assets.tar.bz2 dist\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解压 tar.gz 文件")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" xzv archive.tar.gz\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" xvf archive.tar.gz\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解压bz2压缩包")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" xvf archive.tar.bz2\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示gzip压缩包内容")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" tvf archive.tar.gz\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示bz2压缩包内容")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" tvf archive.tar.bz2\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 从gzip压缩包取出单个文件")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" zxvf archive.tar.gz file.txt\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 从bz2压缩包取出单个文件")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" jxvf archive.tar.bz2 file.txt\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 按通配符取出文件")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" zxvf archive.tar.gz --wildcards "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'*.php'")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" jxvf archive.tar.bz2 --wildcards "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'*.php'")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 追加文件到压缩包")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" rvf archive.tar.gz xyz.txt\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" rvf archive.tar.bz2 xyz.txt\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br")])]),n("h2",{attrs:{id:"rsync"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#rsync"}},[s._v("#")]),s._v(" rsync")]),s._v(" "),n("p",[n("code",[s._v("rsync")]),s._v(" 命令用于在多个目录之间、或者本地与远程目录之间同步。字母 "),n("code",[s._v("r")]),s._v(" 表示 "),n("code",[s._v("remote")]),s._v("。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rsync")]),s._v(" options "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" destination\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("source 和 destination 是下列选项之一:")]),s._v(" "),n("ul",[n("li",[s._v("一个本地文件或目录")]),s._v(" "),n("li",[s._v("一个远端文件或目录，以 "),n("code",[s._v("[user@]host:path")]),s._v(" 的形式存在")]),s._v(" "),n("li",[s._v("一个远端 rsync 服务器，由 "),n("code",[s._v("rsync://[user@]host[:port]/path")]),s._v(" 指定")])]),s._v(" "),n("p",[s._v("注意 source 和 destination 两者之一必须是本地文件。rsync 不支持远端到远端的复制。")]),s._v(" "),n("p",[n("code",[s._v("rsync")]),s._v(" 命令的参数如下。")]),s._v(" "),n("ul",[n("li",[n("code",[s._v("-a")]),s._v(" 递归和保护文件属性")]),s._v(" "),n("li",[n("code",[s._v("-v")]),s._v(" 冗余输出")]),s._v(" "),n("li",[n("code",[s._v("--delete")]),s._v(" 删除可能在备份设备中已经存在但却不再存在于源设备中的文件")]),s._v(" "),n("li",[n("code",[s._v("--rsh=ssh")]),s._v(" 使用 ssh 程序作为远程 shell，目的地必须标注主机名。")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 同步两个本地目录")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rsync")]),s._v(" -av playground foo\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除源设备不存在的文件")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rsync")]),s._v(" -av --delete /etc /home /usr/local /media/BigDisk/backup\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 远程同步")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rsync")]),s._v(" -av --delete --rsh"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ssh /etc /home /usr/local remote-sys:/backup\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 与远程rsync主机同步")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rsync")]),s._v(" -av -delete rsync://rsync.gtlib.gatech.edu/path/to/oss fedora-devel\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);